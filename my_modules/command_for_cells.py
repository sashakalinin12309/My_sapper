# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –≤—Å–µ –Ω—É–∂–Ω—ã–µ –º–æ–¥—É–ª–∏.
import tkinter as tk
from time import time
import my_modules.work_with_file as work_with_file

from my_modules.commands_win_and_lose import lose, neighbours_cells, win

game_over = False  # –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–Ω—è—Ç—å, –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å –ª–∏ –∏–≥—Ä–∞.
flags_counter = 10  # –ü–µ—Ä–µ–º–Ω–Ω–∞—è —Å –∫–æ–ª-–≤–æ–º –Ω–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–ª–∞–∂–∫–æ–≤.
running_timer = False  # –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∞—è, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ —Ç–∞–π–º–µ—Ä.

# –î–∞–ª—å—à–µ –≤—Ç–æ—Ä–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ, –ø–æ —Å—É—Ç–∏, –Ω–µ —Å–≤—è–∑–∞–Ω—ã —Å —è—á–µ–π–∫–∞–º–∏
def new_game() -> None:

    """ –§—É–Ω–∫—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º —Å –∫–æ–Ω—Ü–æ–≤–∫–∏ –∏–≥—Ä—ã –Ω–∞ –Ω–∞—á–∞–ª–æ."""
    
    global game_over
    game_over = False

def counter_flags(size_field: int) -> int:

    """
    –§—É–Ω–∫—Ü–∏—è –∏–∑–º–µ–Ω—è–µ—Ç –∫–æ–ª-–≤–æ —Ñ–ª–∞–∂–∫–æ–≤ –¥–ª—è –∏–≥—Ä—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–∑–º–µ—Ä–æ–≤ –ø–æ–ª—è.
    
    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
        size_field - —Ä–∞–∑–º–µ—Ä—ã_–ø–æ–ª—è (9, 15 –∏–ª–∏ 21)
        
    –í–æ–∑—Ä–∞—â–∞–µ—Ç:
        –ß–∏—Å–ª–æ —Ñ–ª–∞–∂–∫–æ–≤, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∫ —è—á–µ–π–∫–µ, –æ—Ç–≤–µ—á–∞—é—â–µ–π –∑–∞ —Ñ–ª–∞–∂–∫–∏.
    """

    global flags_counter

    if size_field == 9:
        flags_counter = 10
    elif size_field == 15:
        flags_counter = 35
    else:
        flags_counter = 99

    return flags_counter

def stop_timer() -> None:

    """–§—É–Ω–∫—Ü–∏—è –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Ç–∞–π–º–µ—Ä–∞."""
    
    global running_timer
    running_timer = False

# –ê –¥–∞–ª—å—à–µ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —É–∂–µ —Ñ—É–Ω–∫–∏–∏ –¥–ª—è —è—á–µ–µ–∫.
# –í–æ—Ç —ç—Ç–∞ –¥–ª—è –õ–ï–í–û–ô –∫–Ω–æ–ø–∫–∏ –º—ã—à–∏ (LEFT mouse button).
def command_for_cell_lmb(btn: tk.Button, coordinates: tuple, timer: tk.Button, money_counter: tk.Label, dict_about_btn: dict, field: tk.Canvas, coords_bombs: list, criterion_for_win: list, event) -> None:

    """
    –§—É–Ω–∫—Ü–∏—è –¥–ª—è –õ–ö–ú, –∫–æ—Ç–æ—Ä–∞—è —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç —è—á–µ–π–∫—É –∏ –±–ª–∏–∑ –ª–µ–∂–∞—â–∏–µ –Ω—É–ª–∏ –∏ 
    –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –±–æ–º–±–∞ –∏–ª–∏ –Ω–µ—Ç.

    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
    - btn - —è—á–µ–π–∫–∞, –Ω–∞ –∫–æ—Ç–æ—Ä—É—é –Ω–∞–∂–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å;
    - coordinates - –∫–æ—Ä—Ç–µ–∂ —Ç–∏–ø–∞ (x, y) –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–∞—Ç—Ä–∏—Ü–µ–π-–ø–æ–ª–µ–º;
    - timer - —Ç–∞–π–º–µ—Ä, –Ω–æ –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ–º –ª–∏—à—å –µ–≥–æ —Ç–µ–∫—Å—Ç 
    –¥–ª—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è;
    - money_counter - —Å—á–µ—Ç—á–∏–∫ –º–æ–Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å
    –∫–æ–ª-–≤–æ –º–æ–Ω–µ—Ç;
    - dict_about_btn - —Å–ª–æ–≤–∞—Ä—å —Ç–∏–ø–∞ {
        (—Ä–∞–∑–º–µ—â–µ–Ω–∏–µ_–ø–æ_—Ö, —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ_–ø–æ_—É): 
        —Å—Å—ã–ª–∫–∞_–Ω–∞_—è—á–µ–π–∫—É,
        –∑–Ω–∞—á–µ–Ω–∏–µ_–º–∞—Ç—Ä–∏—Ü—ã_–≤_–¥–∞–Ω–Ω–æ–º_–º–µ—Å—Ç–µ(–±–æ–º–±–∞ –∏–ª–∏ —á–∏—Å–ª–æ),
        [–Ω–∞–ª–∏—á–∏–µ_—Ñ–ª–∞–≥–∞]
        } –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç—ã —Å —è—á–µ–π–∫–∞–º–∏;
    - field - –∏–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã —è—á–µ–π–∫–∏ –∏ –Ω–∞–ø–∏—Å–∞–Ω—ã
    —á–∏—Å–ª–∞ –∏ –±–æ–º–±—ã;
    - coords_bombs - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤—Å–µ—Ö –±–æ–º–± (–ø—Ä–∏ –ø—Ä–æ–∏–≥—Ä—ã—à–µ –Ω–∞ —ç—Ç–∏—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö
    –±—É–¥—É—Ç –æ—Ç—Ä–∏—Å–æ–≤–∞–Ω—ã –±–æ–º–±—ã);
    - criterion_for_win - —Å–ø–∏—Å–æ–∫ —Å–æ –≤—Å–µ–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ —è—á–µ–µ–∫
    (–≤ –∫–æ–Ω—Ü–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞: –∫–∞–∫–∏–µ —è—á–µ–π–∫–∏ –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º –æ—Å—Ç–∞–ª–∏—Å—å.
    –ï—Å–ª–∏ —Å—Ä–µ–¥–∏ –Ω–∏—Ö –æ—Å—Ç–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –±–æ–º–±, —Ç–æ –∏–≥—Ä–∞ –≤—ã–∏–≥—Ä–∞–Ω–∞!)
    
    –í–æ–∑—Ä–∞—â–∞–µ—Ç:
        –ù–∏—á–µ–≥–æ, –Ω–æ —è—á–µ–π–∫–∞ –∏ —Å–æ—Å–µ–¥–Ω–∏–µ –Ω—É–ª–∏ —É–Ω–∏—á—Ç–æ–∂–∞—é—Ç—Å—è.
    """

    # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è –¥–ª—è...
    global game_over  # ...–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–∞–±–æ—Ç—ã –¥–∞–Ω–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã –∏ –¥–ª—è –ü–†–ê–í–û–ô –∫–Ω–æ–ø–∫–∏ –º—ã—à–∫–∏.
    global running_timer  # ...–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ç–∞–π–º–µ—Ä–∞ –≤–æ–æ–±—â–µ –≤ –¥—Ä—É–≥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.

    meaning = dict_about_btn[coordinates][1]  # –ó–Ω–∞—á–µ–Ω–∏–µ –¥–∞–Ω–Ω–æ–π —è—á–µ–π–∫–∏ (–±–æ–º–±–∞ –∏–ª–∏ —á–∏—Å–ª–æ).

    if not(str(btn["image"]).isalnum()) and not(game_over):  # –ï—Å–ª–∏ —è—á–µ–π–∫–∞ –Ω–µ –ø–æ–º–µ—á–µ–Ω–∞ —Ñ–ª–∞–∂–∫–æ–º –∏ –∏–≥—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è (–Ω–µ —Ä–µ–∂–∏–º game_over).

        running_timer = True  # –°—Ä–∞–∑—É –∂–µ –æ–±–æ–∑–Ω–∞—á–∞–µ–º, —á—Ç–æ —Ç–∞–π–º–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç!

        # –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –Ω–∞—Å—Ç—É–ø–∏–ª –Ω–∞ –º–∏–Ω—É.
        if meaning == "üí£":

            # –°—Ä–∞–∑—É –∂–µ –≤—ã–≤–æ–¥–∏–º –Ω–∞ –º–µ—Å—Ç–æ —è—á–µ–π–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –≤–∏–¥–∂–µ—Ç —Å –±–æ–º–±–æ—á–∫–æ–π.
            bomba_activate = tk.Label(field, text="üí£", font="Arial 14", width=2, fg="black", bg="red")
            bomba_activate.grid(row=coordinates[0], column=coordinates[1])

            btn.destroy()  # –°–∞–º—É —è—á–µ–π–∫—É —É–Ω–∏—á—Ç–æ–∂–∞–µ–º.

            lose(coords_bombs, dict_about_btn, field, money_counter)  # –ó–∞–ø—É—Å–∫–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é —Å –ø—Ä–æ–∏–≥—Ä—ã—à–µ–º.
            running_timer = False  # –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä.
            game_over = True  # –í–∫–ª—é—á–∞–µ–º —Ä–µ–∂–∏–º game_over. –ö–æ–Ω–µ—Ü –∏–≥—Ä—ã —Å –ø—Ä–æ–∏–≥—Ä—ã—à–µ–º.

        # –ï—Å–ª–∏ –∂–µ –Ω–µ –Ω–∞—Å—Ç—É–ø–∏–ª –Ω–∞ –º–∏–Ω—É.
        else:
            
            # –ï—Å–ª–∏ –≤–æ–∫—Ä—É–≥ —è—á–µ–π–∫–∏ –Ω–µ—Ç –±–æ–º–±.
            if meaning == " ":

                pressed_buttons: set = set(coordinates)  # –ú–Ω–æ–∂–µ—Å—Ç–≤–æ —Å "—É–Ω–∏—á—Ç–æ–∂–µ–Ω–Ω—ã–º–∏" —è—á–µ–π–∫–∞–º–∏ –ø—Ä–∏ –ø—É—Å—Ç–æ–π —è—á–µ–π–∫–µ.
                neighbours: list = neighbours_cells(coordinates, dict_about_btn)  # –°–ø–∏—Å–æ–∫ —Å —Å–æ—Å–µ–¥–Ω–∏–º–∏ —è—á–µ–π–∫–∞–º–∏ —Ç–æ–π, –Ω–∞ –∫–æ—Ç–æ—Ä—É—é –Ω–∞–∂–∞–ª–∏.

                while len(neighbours) > 0:  # –ü–æ–∫–∞ –æ—Å—Ç–∞–Ω—É—Ç—Å—è —Å–æ—Å–µ–¥–Ω–∏–µ —è—á–µ–π–∫–∏

                    coordinates_button = neighbours.pop()  # –£–¥–∞–ª—è–µ–º –∏–∑ —Å–ø–∏—Å–∫–∞ –æ–¥–Ω—É –∏–∑ —Å–æ—Å–µ–¥–Ω–∏—Ö –∫–ª–µ—Ç–æ–∫ –∏ –∑–∞–ø–æ–º–∏–Ω–∞–µ–º –µ—ë –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã.
                    
                    # –ï—Å–ª–∏ —Ç–∞ —Å–æ—Å–µ–¥–Ω—è—è –∫–ª–µ—Ç–∫–∞ —Ç–∞–∫–∂–µ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è "–ø—É—Å—Ç–æ–π".
                    if dict_about_btn[coordinates_button][1] == " ":
                        neighbours.extend(set(neighbours_cells(coordinates_button, dict_about_btn)) - pressed_buttons)  # –†–∞—Å—à–∏—Ä—è–µ–º —Å–ø–∏—Å–æ–∫ —è—á–µ–µ–∫ —Å–æ—Å–µ–¥–Ω–∏–º–∏ —Å–æ—Å–µ–¥–Ω–µ–π —è—á–µ–π–∫–∏.
                        neighbours = list(set(neighbours))  # –£–±–∏—Ä–∞–µ–º –≤—Å–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —è—á–µ–π–∫–∏.
                        
                    # –ï—Å–ª–∏ –∂–µ –æ–Ω–∞ —Å —á–∏—Å–ª–æ–º.
                    else:
                        # –ï—Å–ª–∏ –∂–µ —è—á–µ–π–∫–∞ –Ω–µ –≤ —Å–æ—Å–µ–¥–Ω–∏—Ö –∏ –Ω–∞ –Ω–µ–π –Ω–µ—Ç —Ñ–ª–∞–∂–∫–∞.
                        if coordinates_button not in neighbours and dict_about_btn[coordinates_button][2] != ["flag"]:

                            dict_about_btn[coordinates_button][0].destroy()  # –£–¥–∞–ª—è–µ–º —è—á–µ–π–∫—É –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —á–∏—Å–ª–æ.
                            # –ó–¥–µ—Å—å —É–Ω–∏—á—Ç–æ–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫—Ä–∞–π–Ω–∏–µ —è—á–µ–π–∫–∏ —Ç–æ–π, —Ç–∞–∫ —Å–∫–∞–∂–µ–º, "–ø—É—Å—Ç–æ–π" –∑–æ–Ω—ã.

                            try:
                                delete = criterion_for_win.index(coordinates_button)  # –ù–∞—Ö–æ–¥–∏–º –∏–Ω–¥–µ–∫—Å —è—á–µ–π–∫–∏ –≤ —Å–ø–∏—Å–∫–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –ø–æ–±–µ–¥—É.
                                del criterion_for_win[delete]  # –£–¥–∞–ª—è–µ–º –∏–∑ —Å–ø–∏—Å–∫–∞ —ç—Ç—É —è—á–µ–π–∫—É, —Ç–µ–º —Å–∞–º—ã–º –ø—Ä–∏–±–ª–∏–∂–∞—è—Å—å –∫ –ø–æ–±–µ–¥–µ.
                            except ValueError:
                                pass
                    
                    # –£–¥–∞–ª—è–µ–º –≤—Å–µ –ø—É—Å—Ç—ã–µ —Å–æ—Å–µ–¥–Ω–∏–µ "–ø—É—Å—Ç—ã–µ" —è—á–µ–π–∫–∏, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ —Å —Ñ–ª–∞–∂–∫–æ–º.
                    if dict_about_btn[coordinates_button][2] != ['flag']:
                        dict_about_btn[coordinates_button][0].destroy()

                    try:
                        delete = criterion_for_win.index(coordinates_button)  # –ù–∞—Ö–æ–¥–∏–º –∏–Ω–¥–µ–∫—Å —è—á–µ–π–∫–∏ –≤ —Å–ø–∏—Å–∫–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –ø–æ–±–µ–¥—É.
                        del criterion_for_win[delete]  # –£–¥–∞–ª—è–µ–º –∏–∑ —Å–ø–∏—Å–∫–∞ —ç—Ç—É —è—á–µ–π–∫—É, —Ç–µ–º —Å–∞–º—ã–º –ø—Ä–∏–±–ª–∏–∂–∞—è—Å—å –∫ –ø–æ–±–µ–¥–µ.
                    except ValueError:
                        pass

                    pressed_buttons.add(coordinates_button)  # –î–æ–±–∞–≤–ª—è–µ–º –∫ –Ω–∞–∂–∞—Ç—ã–º –∫–Ω–æ–ø–∫–∞–º —Ç—É —Å–æ—Å–µ–¥–Ω—é—é –∫–ª–µ—Ç–∫—É.
   
                # –ï—Å–ª–∏ –æ—Å—Ç–∞–Ω—É—Ç—Å—è —Ç–æ–ª—å–∫–æ —è—á–µ–π–∫–∏ —Å –±–æ–º–±–∞–º–∏ (–≤—Å–µ –Ω–∞–∂–∞—Ç—ã –¥–ª—è –ø–æ–±–µ–¥—ã).
                if criterion_for_win == list(filter(lambda x: "üí£" in dict_about_btn[x], dict_about_btn)):

                    win(timer["text"], money_counter)  # –ó–∞–ø—É—Å–∫–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–±–µ–¥—ã.

                    running_timer = False  # –í—ã–∫–ª—é—á–∞–µ–º —Ç–∞–π–º–µ—Ä
                    game_over = True  # –†–µ–∂–∏–º game_over –≤–∫–ª—é—á–∞–µ–º. –ö–æ–Ω–µ—Ü –∏–≥—Ä—ã —Å –≤—ã–∏–≥—Ä—ã—à–µ–º.
                    
            # –ï—Å–ª–∏ —è—á–µ–π–∫–∞ –Ω–µ "–ø—É—Å—Ç–∞—è".        
            else:
                
                btn.destroy()  # –£–Ω–∏—á—Ç–æ–∂–∞–µ–º —è—á–µ–π–∫—É-–∫–Ω–æ–ø–∫—É.

                try:
                    delete = criterion_for_win.index(coordinates)  # –ù–∞—Ö–æ–¥–∏–º –∏–Ω–¥–µ–∫—Å —è—á–µ–π–∫–∏ –≤ —Å–ø–∏—Å–∫–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –ø–æ–±–µ–¥—É.
                    del criterion_for_win[delete]  # –£–¥–∞–ª—è–µ–º –∏–∑ —Å–ø–∏—Å–∫–∞ —ç—Ç—É —è—á–µ–π–∫—É, —Ç–µ–º —Å–∞–º—ã–º –ø—Ä–∏–±–ª–∏–∂–∞—è—Å—å –∫ –ø–æ–±–µ–¥–µ.
                except ValueError:
                    pass
                
                # –ï—Å–ª–∏ –æ—Å—Ç–∞–Ω—É—Ç—Å—è —Ç–æ–ª—å–∫–æ —è—á–µ–π–∫–∏ —Å –±–æ–º–±–∞–º–∏ (–≤—Å–µ –Ω–∞–∂–∞—Ç—ã –¥–ª—è –ø–æ–±–µ–¥—ã).
                if criterion_for_win == list(filter(lambda x: "üí£" in dict_about_btn[x], dict_about_btn)):

                    win(timer["text"], money_counter)  # –ó–∞–ø—É—Å–∫–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–±–µ–¥—ã.
                    
                    running_timer = False  # –í—ã–∫–ª—é—á–∞–µ–º —Ç–∞–π–º–µ—Ä
                    game_over = True  # –†–µ–∂–∏–º game_over –≤–∫–ª—é—á–∞–µ–º. –ö–æ–Ω–µ—Ü –∏–≥—Ä—ã —Å –≤—ã–∏–≥—Ä—ã—à–µ–º.

# –ê —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —è—á–µ–π–∫–∏, –µ—Å–ª–∏ –ø–æ –Ω–µ–π –∫–ª–∏–∫–Ω—É—Ç –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –º—ã—à–∏.
def command_for_cell_rmb(btn: tk.Button, button_with_counter_flags: tk.Button, dict_about_btn: dict, coordinates: tuple, event) -> None:

    """
    –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ü–ö–ú, –∫–æ—Ç–æ—Ä–∞—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç/—É–±–∏—Ä–∞–µ—Ç —Ñ–ª–∞–∂–∫–∏.

    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
    - btn - —è—á–µ–π–∫–∞, –Ω–∞ –∫–æ—Ç–æ—Ä—É—é –Ω–∞–∂–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å;
    - button_with_counter_flags - —è—á–µ–π–∫–∞ —Å –∫–æ–ª-–≤–æ–º –∏–º–µ—é—â–∏—Ö—Å—è —Ñ–ª–∞–∂–∫–æ–≤
    (–º–µ–Ω—è—Ç—å –µ–µ —Ç–µ–∫—Å—Ç –±—É–¥–µ–º);
    - dict_about_btn - —Å–ª–æ–≤–∞—Ä—å —Ç–∏–ø–∞ {
        (—Ä–∞–∑–º–µ—â–µ–Ω–∏–µ_–ø–æ_—Ö, —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ_–ø–æ_—É): 
        —Å—Å—ã–ª–∫–∞_–Ω–∞_—è—á–µ–π–∫—É,
        –∑–Ω–∞—á–µ–Ω–∏–µ_–º–∞—Ç—Ä–∏—Ü—ã_–≤_–¥–∞–Ω–Ω–æ–º_–º–µ—Å—Ç–µ(–±–æ–º–±–∞ –∏–ª–∏ —á–∏—Å–ª–æ),
        [–Ω–∞–ª–∏—á–∏–µ_—Ñ–ª–∞–≥–∞]
        } –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç—ã —Å —è—á–µ–π–∫–∞–º–∏;
    - coordinates - –∫–æ—Ä—Ç–µ–∂ —Ç–∏–ø–∞ (x, y) –ø–æ —Ä–∞–∑–º–µ—â–µ–Ω–∏—é —è—á–µ–π–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã
    —Å —Å–ª–æ–≤–∞—Ä–µ–º.

    –í–æ–∑—Ä–∞—â–∞–µ—Ç:
        –ù–∏—á–µ–≥–æ, –Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç/—É–±–∏—Ä–∞–µ—Ç —Ñ–ª–∞–∂–æ–∫.
    """
    # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.
    global flags_counter  # –ö–æ–ª-–≤–æ —Ñ–ª–∞–∂–∫–æ–≤.
    global game_over  # –ù—É–∂–Ω–∞ –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏–≥—Ä—ã.

    check = str(btn["image"]).isalnum()  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ç–æ, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ —Ñ–ª–∞–∂–æ–∫ –Ω–∞ –∫–Ω–æ–ø–∫–µ.

    # –ü–æ–∫–∞ –∏–¥–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –∏–≥—Ä—ã.
    if not(game_over):

        if check:  # –ï—Å–ª–∏ —Ñ–ª–∞–∂–æ–∫ –±—ã–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.

            btn.config(image="", width=2, height=1)  # –£–±–∏—Ä–∞–µ–º —Ñ–ª–∞–∂–æ–∫, –∏–∑–º–µ–Ω—è–µ–º —Ä–∞–∑–º–µ—Ä—ã –ø–æ–¥ –ø—Ä–æ—Å—Ç—É—é –∫–Ω–æ–ø–∫—É.
            dict_about_btn[coordinates][2][0] = "no_flag"  # –î–æ–±–∞–≤–∏–º —Å—Ç–∞—Ç—É—Å "–Ω–µ –ø–æ–¥ —Ñ–ª–∞–≥–æ–º".
            flags_counter += 1  # –†–∞–∑ —Ñ–ª–∞–≥ —É–±—Ä–∞–ª–∏, —Ç–æ –∫ –Ω–µ—Å–∏–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–º –ø—Ä–∏–±–∞–≤–ª—è–µ—Ç—Å—è –µ—â—ë –æ–¥–∏–Ω.

        else:  # –ï—Å–ª–∏ —Ñ–ª–∞–∂–æ–∫ –Ω–µ –±—ã–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.

            if flags_counter != 0:  # –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å —Ñ–ª–∞–∂–∫–∏ –Ω–∞ –ø–æ–ª–µ, –µ—Å–ª–∏ –∏—Ö –∫–æ–ª-–≤–æ –Ω–µ —Ä–∞–≤–Ω—è–µ—Ç—Å—è –Ω—É–ª—é (–æ–Ω–∏ –µ—Å—Ç—å).

                img = tk.PhotoImage(file=f"image//for_use_in_game//flags//{work_with_file.information_in_Information()["–¶–≤–µ—Ç_—Ñ–ª–∞–≥–∞"]}_flags.png")  # –°–æ–∑–¥–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Ñ–ª–∞–∂–∫–∞.
                btn.config(text="", image=img, compound=tk.BOTTOM, width=18, height=20)  # –î–æ–±–∞–≤–ª—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –∫–Ω–æ–ø–∫—É-—è—á–µ–π–∫—É.
                btn.image = img  # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –∫–Ω–æ–ø–∫–∏ (—Ç–∞–∫ –Ω–∞–¥–æ).

                dict_about_btn[coordinates][2][0] = "flag"  # –£—Å—Ç–∞–Ω–æ–≤–ª–∏–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å "–ø–æ–¥ —Ñ–ª–∞–∂–∫–æ–º".
                flags_counter -= 1  # –£–±–∞–≤–ª—è–µ–º –∫–æ–ª-–≤–æ –Ω–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–ª–∞–∂–∫–æ–≤ –Ω–∞ 1.


    button_with_counter_flags['text'] = flags_counter  # –ò–∑–º–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –Ω–∞ –∫–Ω–æ–ø–∫–µ —Å –∫–æ–ª-–≤–æ–º —Ñ–ª–∞–∂–∫–æ–≤.

# –ê —ç—Ç–æ —Ä–∞–±–æ—Ç–∞ —Ç–∞–π–º–µ—Ä–∞.
def process_timer(timer: tk.Button) -> None:

    """
    –§—É–Ω–∫—Ü–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Ä–∞–±–æ—Ç—É —Ç–∞–π–º–µ—Ä–∞.

    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
        timer - —Ç–∞–π–º–µ—Ä, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ–º –º–µ–Ω—è—Ç—å —Ç–µ–∫—Å—Ç.

    –í–æ–∑—Ä–∞—â–∞–µ—Ç:
        –ù–∏—á–µ–≥–æ, –Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–∞–π–º–µ—Ä, –º–µ–Ω—è—è –µ–≥–æ —Ç–µ–∫—Å—Ç.
    """

    global running_timer  # –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –æ—Ç–≤–µ—á–∞—é—â–∞—è –∑–∞ —Ä–∞–±–æ—Ç–∞ –∏ "–æ—Ç–¥—ã—Ö" —Ç–∞–π–º–µ—Ä–∞.

    if running_timer:  # –ï—Å–ª–∏ –¥–∞–Ω–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è True.

        start_time = time()  # –£–∑–Ω–∞–µ–º —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è.
        
        # –ü–æ–∫–∞ running_timer –∞–∫—Ç–∏–≤–µ–Ω –∏ —ç—Ç–æ—Ç —Ç–∞–π–º–µ—Ä –Ω–µ –¥–æ—à–µ–ª –¥–æ 999.9 —Å–µ–∫—É–Ω–¥.
        while running_timer and timer["text"] != 999.9:
            
            timer['text'] = round(time() - start_time, 1)  # –í—ã—á–∏—Å–ª—è–µ–º –≤—Ä–µ–º—è —Ç–∞–π–º–µ—Ä–∞.
            timer.update()  # –û–±–Ω–æ–≤–ª—è–µ–º –µ–≥–æ (—Ç–æ—á–Ω–µ–µ, –µ–≥–æ —Ç–µ–∫—Å—Ç)
